description "Kube-Proxy service"
author "@jainvipin"

limit nofile 524288 1048576
limit nproc 524288 1048576

# respawn

pre-start script
        # see also https://github.com/jainvipin/kubernetes-start
        KUBE_PROXY=/opt/bin/$UPSTART_JOB
        if [ -f /etc/default/$UPSTART_JOB ]; then
                . /etc/default/$UPSTART_JOB
        fi
        if [ -f $KUBE_PROXY ]; then
                exit 0
        fi
    exit 22
end script

script
        # modify these in /etc/default/$UPSTART_JOB (/etc/default/docker)
        KUBE_PROXY=/opt/bin/$UPSTART_JOB
        KUBE_PROXY_OPTS=""
        if [ -f /etc/default/$UPSTART_JOB ]; then
                . /etc/default/$UPSTART_JOB
        fi
        exec "$KUBE_PROXY" $KUBE_PROXY_OPTS
end script

